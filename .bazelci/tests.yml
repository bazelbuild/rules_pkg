common: &common
  working_directory: /workdir/pkg

default_tests: &default_tests
  - "..."

win_tests: &win_tests
  - "..."
  - "-//distro/..."
  - "-//legacy/tests/rpm/..."
  - "-//tests:make_rpm_test"
  - "-//tests:package_naming_aggregate_test"
  - "-//tests:path_test"
  - "-//tests/mappings/filter_directory/..."
  - "-//tests/rpm/..."
  - "-//tests/install/..."

skip_rpm: &skip_rpm
  # rpmbuild(8) is not available on anything but some linuxes
  - "-//tests/rpm/..."
  - "-//legacy/tests/rpm/..."


tasks:
  centos7:
    platform: centos7
    <<: *common
    test_targets:
    <<: *default_tests
    <<: *skip_rpm
  ubuntu1804:
    platform: ubuntu1804
    <<: *common
    test_targets:
    <<: *default_tests
    <<: *skip_rpm
  macos:
    <<: *common
    test_targets:
    <<: *default_tests
    <<: *skip_rpm
  windows:
    <<: *common
    test_targets:
    <<: *win_tests
    <<: *skip_rpm
